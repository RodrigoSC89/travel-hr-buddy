project_id = "vnbptmixvwropvanyhdb"

# Edge Functions Configuration
[functions.send_daily_restore_report]
verify_jwt = false

[functions.send-daily-assistant-report]
verify_jwt = false

[functions.monitor-cron-health]
verify_jwt = false

[functions.send-restore-dashboard-daily]
verify_jwt = false

[functions.mmi-jobs-similar]
verify_jwt = false

[functions.simulate-hours]
verify_jwt = false

[functions.send-alerts]
verify_jwt = false

[functions.send-forecast-report]
verify_jwt = false

[functions.send-real-forecast]
verify_jwt = false

[functions.resend_pending_plans]
verify_jwt = false

[functions.forecast-weekly]
verify_jwt = false

# Cron Jobs - Scheduled Functions
# Documentation: https://supabase.com/docs/guides/functions/schedule-functions
# Format: cron expression (minute hour day month day_of_week)
# Example: "0 7 * * *" = Every day at 7:00 AM UTC

[[edge_runtime.cron]]
name = "daily-restore-report"
function_name = "send_daily_restore_report"
schedule = "0 7 * * *"  # Every day at 7:00 AM UTC
description = "Send daily restore report via email with CSV attachment"

[[edge_runtime.cron]]
name = "daily-assistant-report"
function_name = "send-daily-assistant-report"
schedule = "0 8 * * *"  # Every day at 8:00 AM UTC
description = "Send daily assistant report via email with CSV attachment"

[[edge_runtime.cron]]
name = "monitor-cron-health"
function_name = "monitor-cron-health"
schedule = "0 */12 * * *"  # Every 12 hours
description = "Monitor cron job execution health and send alerts if failures detected"

[[edge_runtime.cron]]
name = "send-restore-dashboard-daily"
function_name = "send-restore-dashboard-daily"
schedule = "0 8 * * *"  # Every day at 08:00 UTC (5h BRT)
description = "Send daily restore dashboard report via email with PDF attachment"

[[edge_runtime.cron]]
name = "simulate-hours"
function_name = "simulate-hours"
schedule = "0 * * * *"  # Every hour
description = "MMI: Simulate hourometer progression and create maintenance jobs"

[[edge_runtime.cron]]
name = "send-alerts"
function_name = "send-alerts"
schedule = "0 8 * * *"  # Every day at 08:00 UTC
description = "MMI: Send email alerts for critical and high-priority maintenance jobs"

[[edge_runtime.cron]]
name = "send-forecast-report"
function_name = "send-forecast-report"
schedule = "0 6 * * 1"  # Every Monday at 06:00 UTC
description = "MMI: Send weekly AI forecast report for maintenance by component"

[[edge_runtime.cron]]
name = "send-real-forecast"
function_name = "send-real-forecast"
schedule = "0 8 * * *"  # Every day at 08:00 UTC (05:00 BRT)
description = "MMI: Send daily real forecast report for maintenance by component"

[[edge_runtime.cron]]
name = "resend-pending-plans"
function_name = "resend_pending_plans"
schedule = "0 8 * * *"  # Every day at 08:00 UTC (05:00 BRT)
description = "DP: Resend pending action plans older than 7 days via email"

[[edge_runtime.cron]]
name = "forecast-weekly"
function_name = "forecast-weekly"
schedule = "0 3 * * 0"  # Every Sunday at 03:00 UTC
description = "MMI: Generate weekly AI forecasts for maintenance jobs and create work orders automatically"

# Jobs By Component Dashboard - Visual Guide

## ğŸ¨ Component Preview

### Normal State (With Data)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   ğŸ“Š Falhas por Componente + Tempo MÃ©dio                           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  Motor Principal      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ              â”‚ â”‚
â”‚   â”‚                       â””â”€ 15 jobs (24.5h avg)               â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  Bomba HidrÃ¡ulica     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ                     â”‚ â”‚
â”‚   â”‚                       â””â”€ 12 jobs (18.3h avg)               â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  Gerador              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ                          â”‚ â”‚
â”‚   â”‚                       â””â”€ 8 jobs (12.1h avg)                â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  Compressor           â–ˆâ–ˆâ–ˆâ–ˆ â–ˆ                               â”‚ â”‚
â”‚   â”‚                       â””â”€ 4 jobs (6.5h avg)                 â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                       â”‚ â”‚
â”‚   â”‚  Qtd Jobs / Horas (Empilhado)                              â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚  Legend:  â–“ Jobs Finalizados   â–’ Tempo MÃ©dio (h)          â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Loading State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   ğŸ“Š Falhas por Componente + Tempo MÃ©dio                           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚   Shimmer effect while loading data...                     â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   ğŸ“Š Falhas por Componente + Tempo MÃ©dio                           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â”‚   âš ï¸  Erro ao carregar dados: Erro ao buscar dados de BI  â”‚ â”‚
â”‚   â”‚       (shown in red text)                                   â”‚ â”‚
â”‚   â”‚                                                             â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Chart Elements

### Bar Chart Configuration

```tsx
Layout: Vertical (horizontal bars)
Height: 350px
Margin: { left: 40 }

Bars:
  1. Jobs Finalizados (count)
     - Color: #0f172a (Dark Slate)
     - Represents: Number of completed jobs
  
  2. Tempo MÃ©dio (avg_duration)
     - Color: #2563eb (Blue)
     - Represents: Average duration in hours
```

### Axis Configuration

```tsx
X-Axis:
  Type: number
  Label: "Qtd Jobs / Horas (Empilhado)"
  Position: insideBottomRight
  Offset: -5

Y-Axis:
  DataKey: component_id
  Type: category
```

## ğŸ¯ Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚
â”‚  mmi_jobs   â”‚
â”‚             â”‚
â”‚ - component â”‚
â”‚ - status    â”‚
â”‚ - created   â”‚
â”‚ - updated   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Edge Function      â”‚
â”‚  /jobs-by-component          â”‚
â”‚                              â”‚
â”‚  1. Query completed jobs     â”‚
â”‚  2. Group by component_id    â”‚
â”‚  3. Calculate avg duration   â”‚
â”‚  4. Sort by count desc       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fetch API                   â”‚
â”‚  /api/bi/jobs-by-component   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DashboardJobs Component     â”‚
â”‚                              â”‚
â”‚  useState: data, loading,    â”‚
â”‚            error             â”‚
â”‚                              â”‚
â”‚  useEffect: fetchStats()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recharts Rendering          â”‚
â”‚  - BarChart (vertical)       â”‚
â”‚  - Two Bars (stacked)        â”‚
â”‚  - Tooltip, Legend           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Color Palette

```css
Component Colors:
â”œâ”€ Card Background: White / Default
â”œâ”€ Title: font-semibold (default text color)
â”œâ”€ Error Text: text-red-600 (#dc2626)
â”œâ”€ Jobs Bar: #0f172a (Dark Slate)
â”œâ”€ Duration Bar: #2563eb (Blue)
â”œâ”€ Skeleton: Default shimmer effect
â””â”€ Tooltip: Default recharts styling
```

## ğŸ“ Dimensions

```
Container:
â”œâ”€ Card: Full width
â”œâ”€ Padding: p-6 (1.5rem)
â””â”€ Gap: mb-4 (1rem)

Chart:
â”œâ”€ ResponsiveContainer: 100% width Ã— 350px height
â”œâ”€ Margin Left: 40px (for Y-axis labels)
â””â”€ Bar Width: Auto (responsive)
```

## ğŸ’¡ Interactive Elements

### Tooltip Behavior

When hovering over a bar:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Motor Principal        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Jobs Finalizados: 15   â”‚
â”‚  Tempo MÃ©dio (h): 24.5  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Legend Interaction

- Click on legend items to show/hide bars
- Hover for highlighting effect

## ğŸ“± Responsive Behavior

```
Desktop (> 1024px):
â””â”€ Full width chart with all components visible

Tablet (768px - 1024px):
â””â”€ Chart scales proportionally

Mobile (< 768px):
â””â”€ Chart maintains height, scrolls horizontally if needed
```

## ğŸ”— Integration Example

### In a Grid Layout

```tsx
<div className="grid grid-cols-2 gap-4">
  <DashboardJobs />
  <OtherDashboardComponent />
</div>
```

### In a Tab System

```tsx
<Tabs>
  <TabsList>
    <TabsTrigger value="jobs">Jobs by Component</TabsTrigger>
  </TabsList>
  <TabsContent value="jobs">
    <DashboardJobs />
  </TabsContent>
</Tabs>
```

### Standalone Page

```tsx
// src/pages/admin/bi-jobs.tsx
export default function BiJobsDemo() {
  return (
    <div className="container mx-auto p-6">
      <h1>Jobs By Component BI Dashboard</h1>
      <DashboardJobs />
    </div>
  );
}
```

## ğŸ­ State Transitions

```
Initial State (mounted)
    â”‚
    â”œâ”€ loading: true
    â”œâ”€ data: []
    â””â”€ error: null
    â”‚
    â–¼
Fetching Data
    â”‚
    â”œâ”€ Shows Skeleton
    â””â”€ Calls fetch()
    â”‚
    â–¼
Success Path          Error Path
    â”‚                     â”‚
    â”œâ”€ loading: false     â”œâ”€ loading: false
    â”œâ”€ data: [...]        â”œâ”€ data: []
    â””â”€ error: null        â””â”€ error: "message"
    â”‚                     â”‚
    â–¼                     â–¼
Renders Chart         Shows Error UI
```

## ğŸ“Š Data Example

```json
// Response from /api/bi/jobs-by-component
[
  {
    "component_id": "Motor Principal",
    "count": 15,
    "avg_duration": 24.5
  },
  {
    "component_id": "Bomba HidrÃ¡ulica",
    "count": 12,
    "avg_duration": 18.3
  },
  {
    "component_id": "Gerador",
    "count": 8,
    "avg_duration": 12.1
  },
  {
    "component_id": "Compressor",
    "count": 4,
    "avg_duration": 6.5
  }
]
```

## ğŸ¯ Key Features Visualization

### 1. Dual Metrics Display
```
Component A:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ  â† Jobs count + Avg duration
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”¬â”˜
                     â”‚        â”‚
                 Jobs (15)  Duration (24.5h)
```

### 2. Sorted by Priority
```
Most Jobs    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Motor (15)
             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Bomba (12)
             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Gerador (8)
Least Jobs   â–ˆâ–ˆâ–ˆâ–ˆ  Compressor (4)
```

### 3. Clear Labeling
```
X-Axis Label: "Qtd Jobs / Horas (Empilhado)"
              â””â”€ Explains the stacked metric visualization

Legend:
  â–“ Jobs Finalizados  â† Dark bar
  â–’ Tempo MÃ©dio (h)   â† Blue bar
```

## ğŸš€ Performance Characteristics

```
Initial Load: 
â”œâ”€ Fetch call initiated
â”œâ”€ Skeleton shown immediately
â””â”€ ~500ms typical load time

Data Update:
â”œâ”€ Smooth transition from skeleton to chart
â””â”€ No flickering or layout shift

Interactivity:
â”œâ”€ Instant hover feedback
â””â”€ Smooth tooltip animations
```

## âœ¨ Visual Polish

1. **Shadow & Borders**: Card component with subtle shadow
2. **Typography**: Clear hierarchy (h2 title, chart labels)
3. **Spacing**: Consistent padding and margins
4. **Colors**: Professional color scheme (dark slate + blue)
5. **Animations**: Smooth transitions and hover effects
6. **Error Feedback**: Clear red error messages
7. **Loading State**: Professional skeleton animation

This visual guide demonstrates the complete user experience of the Jobs By Component Dashboard component.

# Stages 29-31 Visual Implementation Summary

## ğŸ¯ Module Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STAGE 29: SIMULATIONS                        â”‚
â”‚  Manage mandatory onboard simulations (IMCA, MTS, IBAMA)       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ URL: /admin/simulations                                     â”‚
â”‚  ğŸ‘¥ Access: admin, hr_manager, safety_officer                   â”‚
â”‚  ğŸ“Š Features: Tracking, Scheduling, Alerts, Statistics          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STAGE 30: CRON MONITOR                        â”‚
â”‚    Monitor automated tasks and scheduled jobs (SGSO)            â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ URL: /admin/cron-monitor                                    â”‚
â”‚  ğŸ‘¥ Access: admin, hr_manager                                   â”‚
â”‚  ğŸ“Š Features: Job Status, Execution History, Statistics         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STAGE 31: TRAINING                           â”‚
â”‚     Track crew training, certifications, and compliance         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ URL: /admin/training                                        â”‚
â”‚  ğŸ‘¥ Access: admin, hr_manager, training_coordinator             â”‚
â”‚  ğŸ“Š Features: Modules, Records, Expiration Tracking             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Database Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VESSELS         â”‚
â”‚  (existing table)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SIMULATION_EXERCISES â”‚       â”‚    CRON_JOBS        â”‚
â”‚                      â”‚       â”‚                     â”‚
â”‚ â€¢ vessel_id (FK)     â”‚       â”‚ â€¢ name              â”‚
â”‚ â€¢ type               â”‚       â”‚ â€¢ schedule          â”‚
â”‚ â€¢ frequency_days     â”‚       â”‚ â€¢ status            â”‚
â”‚ â€¢ last_simulation    â”‚       â”‚ â€¢ execution_count   â”‚
â”‚ â€¢ next_due           â”‚       â”‚ â€¢ success_count     â”‚
â”‚ â€¢ status             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ notes              â”‚                  â”‚
â”‚ â€¢ attachments        â”‚                  â”‚ 1:N
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ CRON_JOB_EXECUTIONSâ”‚
â”‚   CREW_MEMBERS       â”‚        â”‚                    â”‚
â”‚  (existing table)    â”‚        â”‚ â€¢ job_id (FK)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â€¢ started_at       â”‚
           â”‚                    â”‚ â€¢ completed_at     â”‚
           â”‚ 1:N                â”‚ â€¢ status           â”‚
           â”‚                    â”‚ â€¢ duration_ms      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ CREW_TRAINING_RECORDSâ”‚
â”‚                      â”‚
â”‚ â€¢ crew_id (FK)       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ training_module_id â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ TRAINING_MODULES   â”‚
â”‚ â€¢ date_completed     â”‚   N:1  â”‚                    â”‚
â”‚ â€¢ result             â”‚        â”‚ â€¢ title            â”‚
â”‚ â€¢ valid_until        â”‚        â”‚ â€¢ category         â”‚
â”‚ â€¢ status             â”‚        â”‚ â€¢ duration_hours   â”‚
â”‚ â€¢ linked_incident_id â”‚        â”‚ â€¢ validity_days    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± UI Component Hierarchy

### SIMULATIONS PAGE
```
â”Œâ”€ /admin/simulations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€ ModuleHeader â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸš¢ Controle de SimulaÃ§Ãµes Embarcadas               â”‚    â”‚
â”‚  â”‚  Badge: Compliance IMCA/MTS/IBAMA                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ SimulationStats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š Total â”‚ âœ… ConcluÃ­das â”‚ ğŸ• Agendadas â”‚ âš ï¸ Atrasadas â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  [ğŸ“… Agendar SimulaÃ§Ã£o]                                      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ Lista â”‚ ğŸ“… CalendÃ¡rio â”‚ âš ï¸ Alertas             â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€ SimulationExerciseList â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ DP - Vessel ABC - Next: 15/12/2025     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Blackout - Vessel XYZ - Overdue!       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Abandono - Vessel 123 - Scheduled      â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ CreateSimulationDialog â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Select Vessel: [dropdown]                          â”‚    â”‚
â”‚  â”‚  Type: [DP/Blackout/Abandono/etc]                  â”‚    â”‚
â”‚  â”‚  Frequency: [90] days                               â”‚    â”‚
â”‚  â”‚  [Cancel] [Agendar]                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CRON MONITOR PAGE
```
â”Œâ”€ /admin/cron-monitor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€ ModuleHeader â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ• Monitor de Tarefas Agendadas (Cron)             â”‚    â”‚
â”‚  â”‚  Badge: Tarefas SGSO                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ CronJobStats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š Total Jobs â”‚ ğŸ• Running â”‚ âŒ Failed â”‚ âœ… Success %â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  [ğŸ”„ Atualizar]                                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ• Jobs â”‚ â–¶ï¸ ExecuÃ§Ãµes                             â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€ CronJobsPanel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Job                   â”‚ Last Run â”‚ Status  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  forecast-job          â”‚ 7:00 AM  â”‚ âœ… OK   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  validate-sgso         â”‚ Mon 6AM  â”‚ âœ… OK   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  email-dp-alerts       â”‚ 12:00 PM â”‚ âš ï¸ RUNNINGâ”‚   â”‚    â”‚
â”‚  â”‚  â”‚  backup-database       â”‚ 2:00 AM  â”‚ âŒ FAILEDâ”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TRAINING PAGE
```
â”Œâ”€ /admin/training â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€ ModuleHeader â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ GestÃ£o de Treinamento e CapacitaÃ§Ã£o             â”‚    â”‚
â”‚  â”‚  Badge: Compliance IMCA/IBAMA                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ TrainingStats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š Total â”‚ âœ… ConcluÃ­dos â”‚ ğŸ• Em Progresso â”‚ âš ï¸ Expiradosâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  [ğŸ“š Registrar Treinamento]                                  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ Registros â”‚ ğŸ“š MÃ³dulos â”‚ ğŸ‘¥ TripulaÃ§Ã£o â”‚ âš ï¸ Vencidosâ”‚  â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€ CrewTrainingRecords â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ‘¤ JoÃ£o Silva - DP Operations             â”‚      â”‚    â”‚
â”‚  â”‚  â”‚     âœ… Completed - Valid until: 01/06/2025â”‚      â”‚    â”‚
â”‚  â”‚  â”‚                                            â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ‘¤ Maria Santos - Fire Fighting           â”‚      â”‚    â”‚
â”‚  â”‚  â”‚     âš ï¸ Expired - Was valid until: 15/10/2025â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow

### Simulation Creation Flow
```
User Input
    â”‚
    â–¼
CreateSimulationDialog
    â”‚
    â–¼
Form Validation
    â”‚
    â–¼
Supabase Insert
    â”‚
    â–¼
Trigger: calculate_simulation_next_due()
    â”‚
    â”œâ”€â–º Calculate next_due date
    â””â”€â–º Update status
    â”‚
    â–¼
React Query Invalidation
    â”‚
    â”œâ”€â–º simulation-exercises
    â””â”€â–º simulation-stats
    â”‚
    â–¼
UI Updates Automatically
```

### Training Record Flow
```
Training Completed
    â”‚
    â–¼
CreateTrainingDialog
    â”‚
    â–¼
Insert crew_training_records
    â”‚
    â–¼
Trigger: calculate_training_validity()
    â”‚
    â”œâ”€â–º Get module validity_days
    â”œâ”€â–º Calculate valid_until
    â””â”€â–º Check if expired
    â”‚
    â–¼
Linked to crew_members (FK)
    â”‚
    â–¼
Available in crew dossiÃª
```

### Cron Job Execution Flow
```
Scheduled Time
    â”‚
    â–¼
Job Execution Starts
    â”‚
    â–¼
Insert cron_job_executions (RUNNING)
    â”‚
    â–¼
Job Completes/Fails
    â”‚
    â–¼
Update cron_job_executions (OK/FAILED)
    â”‚
    â–¼
Trigger: update_cron_job_stats()
    â”‚
    â”œâ”€â–º Increment execution_count
    â”œâ”€â–º Update success/failure count
    â”œâ”€â–º Calculate average_duration_ms
    â””â”€â–º Update last_run
    â”‚
    â–¼
Dashboard Shows Latest Status
```

## ğŸ“Š Statistics Display

### Simulation Stats
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Total: 24 â”‚ âœ… Done: 18  â”‚ ğŸ• Planned: 4â”‚ âš ï¸ Late: 2  â”‚
â”‚              â”‚              â”‚              â”‚              â”‚
â”‚ Rate: 75%    â”‚ Last: Today  â”‚ Next: Mon    â”‚ Due: -3 days â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cron Stats
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Jobs: 5   â”‚ ğŸ• Running: 1â”‚ âŒ Failed: 0 â”‚ âœ… Rate: 98% â”‚
â”‚              â”‚              â”‚              â”‚              â”‚
â”‚ Enabled: 5   â”‚ Last: 2m ago â”‚ Avg: 245ms   â”‚ Total: 1.2k  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Training Stats
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Total: 45 â”‚ âœ… Done: 38  â”‚ ğŸ• Progress:3â”‚ âš ï¸ Expired: 4â”‚
â”‚              â”‚              â”‚              â”‚              â”‚
â”‚ Rate: 84%    â”‚ This Month:5 â”‚ Expiring: 2  â”‚ Courses: 6   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Color Coding

### Status Badges

**Simulations:**
- ğŸŸ¢ Green: Completed
- ğŸŸ¡ Yellow: Scheduled
- ğŸ”´ Red: Overdue
- âšª Gray: Cancelled

**Cron Jobs:**
- ğŸŸ¢ Green: OK
- ğŸ”´ Red: FAILED
- ğŸŸ¡ Yellow: RUNNING
- âšª Gray: PENDING

**Training:**
- ğŸŸ¢ Green: Completed
- ğŸŸ¡ Yellow: In Progress
- âšª Gray: Scheduled
- ğŸ”´ Red: Expired/Failed

## ğŸ” Security Model

```
User Login
    â”‚
    â–¼
Role Check (RoleBasedAccess)
    â”‚
    â”œâ”€â–º admin â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Full Access
    â”‚                     (All 3 modules)
    â”‚
    â”œâ”€â–º hr_manager â”€â”€â”€â”€â”€â–º Full Access
    â”‚                     (All 3 modules)
    â”‚
    â”œâ”€â–º safety_officer â”€â–º Limited Access
    â”‚                     (Simulations only)
    â”‚
    â””â”€â–º training_coord â”€â–º Limited Access
                          (Training only)
    â”‚
    â–¼
Database RLS
    â”‚
    â”œâ”€â–º authenticated = true
    â””â”€â–º tenant_id matches (via TenantContext)
    â”‚
    â–¼
Access Granted
```

## ğŸ“ˆ Performance Optimizations

### Database
```
âœ… Indexes on foreign keys
âœ… Indexes on status fields
âœ… Indexes on date fields
âœ… Composite indexes where needed
âœ… Materialized statistics (via triggers)
```

### Frontend
```
âœ… React Query caching
âœ… Lazy loading of pages
âœ… Optimistic updates
âœ… Debounced searches
âœ… Pagination support
```

## ğŸ¯ Compliance Mapping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REGULATIONS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ IMCA M220       â”‚ DP Simulations                        â”‚
â”‚ IMCA M117       â”‚ DP Training                           â”‚
â”‚ IBAMA SGSO      â”‚ Safety Management                     â”‚
â”‚ MTS Guidelines  â”‚ Periodic Simulations                  â”‚
â”‚ ISM Code        â”‚ Emergency Response                    â”‚
â”‚ STCW           â”‚ Fire Fighting Training                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM FEATURES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Simulations     â”‚ Type tracking, frequency, evidence   â”‚
â”‚ Training        â”‚ Certificates, validity, competence   â”‚
â”‚ Monitoring      â”‚ Automated checks, alerts, reports    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… Implementation Checklist

```
Stage 29: Simulations
  âœ… Database schema
  âœ… RLS policies
  âœ… Triggers & functions
  âœ… TypeScript types
  âœ… Admin page
  âœ… Components (4)
  âœ… Statistics
  âœ… Create dialog

Stage 30: Cron Monitor
  âœ… Database schema
  âœ… RLS policies
  âœ… Triggers & functions
  âœ… TypeScript types
  âœ… Admin page
  âœ… Components (3)
  âœ… Statistics
  âœ… Pre-populated jobs

Stage 31: Training
  âœ… Database schema
  âœ… RLS policies
  âœ… Triggers & functions
  âœ… TypeScript types
  âœ… Admin page
  âœ… Components (5)
  âœ… Statistics
  âœ… Create dialog
  âœ… Pre-populated modules

Quality Assurance
  âœ… All tests passing
  âœ… Build successful
  âœ… Lint compliant
  âœ… Type-safe
  âœ… Documented
  âœ… Responsive design
```

## ğŸš€ Ready for Production

All three stages are fully implemented, tested, and documented. The system is ready for production deployment with comprehensive compliance tracking and operational management capabilities.
